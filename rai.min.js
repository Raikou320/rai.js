(function(){document.addEventListener("DOMContentLoaded",()=>{let e;e="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this;const n={aabb:function(t,e){const n=t.width||t.w||0,o=t.height||t.h||0,i=t.x||0,c=t.y||0,r=e.width||e.w||0,f=e.height||e.h||0,l=e.x||0,a=e.y||0;return i<l+r&&i+n>l&&c<a+f&&c+o>a},background:function(t,e,n,o){"string"==typeof t?ctx.fillStyle=t:"number"==typeof t&&void 0===e?ctx.fillStyle=`rgb(${t}, ${t}, ${t})`:"number"==typeof t&&"number"==typeof e&&void 0===n?ctx.fillStyle=`rgba(${t}, ${t}, ${t}, ${e/255})`:"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&void 0===o?ctx.fillStyle=`rgb(${t}, ${e}, ${n})`:"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o&&(ctx.fillStyle=`rgba(${t}, ${e}, ${n}, ${o/255})`),ctx.fillRect(0,0,width,height),ctx.fillStyle="black"},clear:function(){ctx.clearRect(0,0,width,height)},color:function(t,e,n,o){return"string"==typeof t?t:"number"==typeof t&&void 0===e?`rgb(${t}, ${t}, ${t})`:"number"==typeof t&&"number"==typeof e&&void 0===n?`rgba(${t}, ${t}, ${t}, ${e/255})`:"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&void 0===o?`rgb(${t}, ${e}, ${n})`:"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?`rgba(${t}, ${e}, ${n}, ${o/255})`:void 0},createCanvas:function(t,n){const o=document.createElement("canvas"),c=o.getContext("2d");o.width=t,o.height=n,e.canvas=o,e.ctx=c,e.width=t,e.height=n,document.body.appendChild(o),o.addEventListener("mousemove",t=>{const n=o.getBoundingClientRect(),c=t.clientX-n.left,r=t.clientY-n.top;i.mouseX=c,i.mouseY=r,e.mouseX=c,e.mouseY=r})},ellipse:function(t,e,n,o){ctx.beginPath(),ctx.ellipse(t,e,n,o,0,0,2*Math.PI),ctx.fill(),ctx.stroke(),ctx.closePath()},fill:function(t,e,n,o){"string"==typeof t?ctx.fillStyle=t:"number"==typeof t&&void 0===e?ctx.fillStyle=`rgb(${t}, ${t}, ${t})`:"number"==typeof t&&"number"==typeof e&&void 0===n?ctx.fillStyle=`rgb(${t}, ${e}, 0)`:"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&void 0===o?ctx.fillStyle=`rgb(${t}, ${e}, ${n})`:"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o&&(ctx.fillStyle=`rgba(${t}, ${e}, ${n}, ${o/255})`)},fontFamily:function(t){const e=ctx.font.split(" "),n=e.find(t=>t.endsWith("px"));n&&(ctx.font=`${n} ${t}`)},fontSize:function(t){const e=ctx.font.split(" "),n=e.find(t=>t.endsWith("px")),o=e.indexOf(n);if(-1===o)return;const i=e.slice(o+1).join(" ");ctx.font=`${t} ${i}`},image:function(t,n,o,i,c){const r=e.ctx;t.complete&&0!==t.naturalWidth?r.drawImage(t,n,o,i,c):t.onload=(()=>{r.drawImage(t,n,o,i,c)})},isKeyDown:function(e){return!1===t.keyState[e]},line:function(t,e,n,o){ctx.beginPath(),ctx.moveTo(t,e),ctx.lineTo(n,o),ctx.stroke(),ctx.closePath()},loadImage:function(t){const e=new Image;return e.onload=(()=>{e.width=e.naturalWidth,e.height=e.naturalHeight}),e.src=t,e},noFill:function(){ctx.fillStyle=e.TRANSPARENT},noStroke:function(){ctx.strokeStyle=e.TRANSPARENT},polygon:function(t){ctx.beginPath(),ctx.moveTo(t[0][0],t[0][1]);for(let e=1;e<t.length;e++)ctx.lineTo(t[e][0],t[e][1]);ctx.closePath(),ctx.fill(),ctx.stroke()},random:function(t,e){return void 0===e?Math.random()*t:Math.random()*(e-t)+t},rect:function(t,e,n,o){ctx.beginPath(),ctx.rect(t,e,n,o),ctx.fill(),ctx.stroke()},save:function(t){t||(t="canvas.png");const n=e.canvas.toDataURL("image/png"),o=document.createElement("a");o.href=n,o.download=t,o.click()},stroke:function(t){ctx.lineWidth=t},strokeColor:function(t){ctx.strokeStyle=t},text:function(t,e,n){ctx.fillText(t,e,n)},translate:function(t,e){ctx.translate(t,e)}};let o={};e.keyState=o,e.addEventListener("keydown",t=>{e.keyState[t.keyCode]=!0}),e.addEventListener("keyup",t=>{e.keyState[t.keyCode]=!1});for(const t in n)e[t]=n[t];const i={TRANSPARENT:"rgba(0, 0, 0, 0)",mouseX:0,mouseY:0,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40};for(const t in i)e[t]=i[t];"function"==typeof e.raiLoad&&e.raiLoad(),"function"==typeof e.raiSetup&&e.raiSetup(),"function"==typeof e.raiDraw&&requestAnimationFrame(()=>e.raiDraw())})})();