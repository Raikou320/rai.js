(function(){document.addEventListener("DOMContentLoaded",()=>{let t;t="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this;const e={aabb:function(t,e){const n=t.width||t.w||0,o=t.height||t.h||0,i=t.x||0,c=t.y||0,a=e.width||e.w||0,l=e.height||e.h||0,f=e.x||0,s=e.y||0;return i<f+a&&i+n>f&&c<s+l&&c+o>s},background:function(e){const n=t.width,o=t.height;ctx.fillStyle=e,ctx.fillRect(0,0,n,o)},clear:function(){ctx.clearRect(0,0,width,height)},createCanvas:function(e,n){const i=document.createElement("canvas"),c=i.getContext("2d");i.width=e,i.height=n,t.canvas=i,t.ctx=c,t.width=e,t.height=n,document.body.appendChild(i),i.addEventListener("mousemove",e=>{const n=i.getBoundingClientRect(),c=e.clientX-n.left,a=e.clientY-n.top;o.mouseX=c,o.mouseY=a,t.mouseX=c,t.mouseY=a})},ellipse:function(t,e,n,o){ctx.beginPath(),ctx.ellipse(t,e,n,o,0,0,2*Math.PI),ctx.fill(),ctx.stroke(),ctx.closePath()},fill:function(t){ctx.fillStyle=t},fontFamily:function(t){const e=ctx.font.split(" "),n=e.find(t=>t.endsWith("px"));n&&(ctx.font=`${n} ${t}`)},fontSize:function(t){const e=ctx.font.split(" "),n=e.find(t=>t.endsWith("px")),o=e.indexOf(n);if(-1===o)return;const i=e.slice(o+1).join(" ");ctx.font=`${t} ${i}`},image:function(e,n,o,i,c){const a=t.ctx;e.complete&&0!==e.naturalWidth?a.drawImage(e,n,o,i,c):e.onload=(()=>{a.drawImage(e,n,o,i,c)})},isKeyDown:function(e){return!0===t.keyState[e]},line:function(t,e,n,o){ctx.beginPath(),ctx.moveTo(t,e),ctx.lineTo(n,o),ctx.stroke(),ctx.closePath()},loadImage:function(t){const e=new Image;return e.onload=(()=>{e.width=e.naturalWidth,e.height=e.naturalHeight}),e.src=t,e},noFill:function(){ctx.fillStyle=t.TRANSPARENT},noStroke:function(){ctx.strokeStyle=t.TRANSPARENT},polygon:function(t){ctx.beginPath(),ctx.moveTo(t[0][0],t[0][1]);for(let e=1;e<t.length;e++)ctx.lineTo(t[e][0],t[e][1]);ctx.closePath(),ctx.fill(),ctx.stroke()},rect:function(t,e,n,o){ctx.beginPath(),ctx.rect(t,e,n,o),ctx.fill(),ctx.stroke()},save:function(e){e||(e="canvas.png");const n=t.canvas.toDataURL("image/png"),o=document.createElement("a");o.href=n,o.download=e,o.click()},stroke:function(t){ctx.lineWidth=t},strokeColor:function(t){ctx.strokeStyle=t},text:function(t,e,n){ctx.fillText(t,e,n)},translate:function(t,e){ctx.translate(t,e)}};let n={};t.keyState=n,t.addEventListener("keydown",e=>{t.keyState[e.keyCode]=!0}),t.addEventListener("keyup",e=>{t.keyState[e.keyCode]=!1});for(const n in e)t[n]=e[n];const o={TRANSPARENT:"rgba(0, 0, 0, 0)",mouseX:0,mouseY:0,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40};for(const e in o)t[e]=o[e];if("function"==typeof t.raiLoad&&t.raiLoad(),"function"==typeof t.raiSetup&&t.raiSetup(),"function"==typeof t.raiDraw){function i(){t.raiDraw(),requestAnimationFrame(i)}requestAnimationFrame(i)}})})();